<Window x:Class="FileEncrypter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="FileEncrypter"
        Width="900" Height="700"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource SurfaceBrush}"
        AllowDrop="True"
        DragEnter="Window_DragEnter"
        DragOver="Window_DragOver"
        DragLeave="Window_DragLeave"
        Drop="Window_Drop">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar -->
        <Border Grid.Column="0" Style="{StaticResource SidebarPanel}">
            <StackPanel>
                <!-- Logo/Header -->
                <Border Background="{StaticResource AccentBrush}" Padding="16,20">
                    <TextBlock Text="🔐 FileEncrypter" 
                               FontSize="18" 
                               FontWeight="Bold" 
                               Foreground="White" 
                               HorizontalAlignment="Center"/>
                </Border>

                <!-- Navigation Buttons -->
                <StackPanel Margin="0,16,0,0">
                    <Button x:Name="EncryptNavButton"
                            Content="🔒 Encriptar"
                            Style="{StaticResource SidebarButtonActive}"
                            Click="EncryptNav_Click"/>
                    <Button x:Name="DecryptNavButton"
                            Content="🔓 Desencriptar"
                            Style="{StaticResource SidebarButton}"
                            Click="DecryptNav_Click"/>
                    <Button x:Name="HistoryNavButton"
                            Content="📋 Historial"
                            Style="{StaticResource SidebarButton}"
                            Click="HistoryNav_Click"
                            Margin="0,8,0,0"/>
                </StackPanel>

                <!-- Progress Section (Global) -->
                <StackPanel x:Name="ProgressSection" Visibility="Collapsed" Margin="16,24,16,0">
                    <TextBlock 
                        Text="📊 Progreso" 
                        FontSize="12"
                        FontWeight="SemiBold"
                        Foreground="{StaticResource OnSurfaceBrush}"
                        Margin="0,0,0,8"/>
                    <ProgressBar 
                        x:Name="ProgressBar" 
                        Style="{StaticResource ModernProgressBar}"/>
                    <Button 
                        x:Name="CancelButton" 
                        Content="❌ Cancelar" 
                        Style="{StaticResource SmallButton}"
                        Click="CancelButton_Click" 
                        IsEnabled="False"
                        Margin="0,8,0,0"
                        HorizontalAlignment="Stretch"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Main Content Area -->
        <ScrollViewer Grid.Column="1" Style="{StaticResource ContentPanel}">
            <StackPanel MaxWidth="600">

                <!-- Encrypt Section -->
                <StackPanel x:Name="EncryptSection" Visibility="Visible">
                    <TextBlock Text="🔒 Encriptar Archivos" Style="{StaticResource SectionHeader}" Margin="0,0,0,16"/>
                    
                    <!-- Main Layout Grid -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Left Column -->
                        <StackPanel Grid.Column="0">
                            <!-- File Selection & Drop Zone -->
                            <Border Style="{StaticResource Card}" Margin="0,0,0,12">
                                <StackPanel>
                                    <TextBlock 
                                        Text="📂 Seleccionar Archivo" 
                                        Style="{StaticResource SectionTitle}" 
                                        Margin="0,0,0,12"/>
                                    
                                    <Grid x:Name="EncryptDropZone" Height="100" Margin="0,0,0,12">
                                        <Rectangle 
                                            Stroke="{StaticResource AccentBrush}" 
                                            StrokeThickness="2" 
                                            StrokeDashArray="8,4" 
                                            RadiusX="8" 
                                            RadiusY="8"
                                            Fill="Transparent"/>
                                        
                                        <StackPanel 
                                            HorizontalAlignment="Center" 
                                            VerticalAlignment="Center">
                                            <TextBlock 
                                                Text="📁" 
                                                FontSize="24" 
                                                HorizontalAlignment="Center" 
                                                Foreground="{StaticResource AccentBrush}"
                                                Margin="0,0,0,4"/>
                                            <TextBlock 
                                                Text="Arrastra archivos aquí" 
                                                FontSize="14" 
                                                FontWeight="SemiBold"
                                                HorizontalAlignment="Center" 
                                                Foreground="{StaticResource OnSurfaceBrush}"/>
                                        </StackPanel>
                                    </Grid>
                                    
                                    <Button
                                        Content="📁 Seleccionar Archivo"
                                        Style="{StaticResource AccentButton}"
                                        Click="EncryptFile_Click"
                                        HorizontalAlignment="Stretch"
                                        Margin="0,0,0,8"/>
                                        
                                    <CheckBox
                                        x:Name="DeleteOriginalCheckBox"
                                        Content="Eliminar archivo original"
                                        Style="{StaticResource ModernCheckBox}"
                                        HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Password Generator Toggle -->
                            <Border x:Name="PasswordGenerator" 
                                    Style="{StaticResource Card}" 
                                    Background="#FF1A2332"
                                    BorderBrush="{StaticResource AccentBrush}"
                                    BorderThickness="1"
                                    Visibility="Collapsed"
                                    Margin="0,0,0,12">
                                <StackPanel>
                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBlock 
                                            Grid.Column="0"
                                            Text="🎲 Generador" 
                                            FontSize="16" 
                                            FontWeight="Bold" 
                                            Foreground="{StaticResource AccentBrush}"/>
                                        
                                        <Button 
                                            Grid.Column="1"
                                            Content="❌"
                                            Style="{StaticResource SmallButton}"
                                            Click="ToggleGenerator_Click"
                                            Background="#FF374151"/>
                                    </Grid>

                                    <!-- Compact Generator Controls -->
                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBlock 
                                            Grid.Column="0"
                                            Text="Longitud:" 
                                            Foreground="{StaticResource OnSurfaceBrush}"
                                            VerticalAlignment="Center"
                                            Margin="0,0,8,0"/>
                                        
                                        <Slider 
                                            Grid.Column="1"
                                            x:Name="LengthSlider"
                                            Style="{StaticResource ModernSlider}"
                                            Minimum="8"
                                            Maximum="24"
                                            Value="12"
                                            IsSnapToTickEnabled="True"
                                            TickFrequency="1"
                                            ValueChanged="LengthSlider_ValueChanged"
                                            Margin="0,0,8,0"/>
                                        
                                        <TextBlock 
                                            Grid.Column="2"
                                            x:Name="LengthValue"
                                            Text="12"
                                            Foreground="{StaticResource AccentBrush}"
                                            FontWeight="Bold"
                                            VerticalAlignment="Center"/>
                                    </Grid>

                                    <!-- Compact Character Types -->
                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        
                                        <CheckBox 
                                            Grid.Row="0" Grid.Column="0"
                                            x:Name="IncludeUppercase"
                                            Content="A-Z"
                                            Style="{StaticResource ModernCheckBox}"
                                            IsChecked="True"
                                            Checked="CharacterType_Changed"
                                            Unchecked="CharacterType_Changed"/>
                                        
                                        <CheckBox 
                                            Grid.Row="0" Grid.Column="1"
                                            x:Name="IncludeLowercase"
                                            Content="a-z"
                                            Style="{StaticResource ModernCheckBox}"
                                            IsChecked="True"
                                            Checked="CharacterType_Changed"
                                            Unchecked="CharacterType_Changed"/>
                                        
                                        <CheckBox 
                                            Grid.Row="1" Grid.Column="0"
                                            x:Name="IncludeNumbers"
                                            Content="0-9"
                                            Style="{StaticResource ModernCheckBox}"
                                            IsChecked="True"
                                            Checked="CharacterType_Changed"
                                            Unchecked="CharacterType_Changed"/>
                                        
                                        <CheckBox 
                                            Grid.Row="1" Grid.Column="1"
                                            x:Name="IncludeSpecial"
                                            Content="!@#$"
                                            Style="{StaticResource ModernCheckBox}"
                                            IsChecked="True"
                                            Checked="CharacterType_Changed"
                                            Unchecked="CharacterType_Changed"/>
                                    </Grid>

                                    <!-- Generated Password Preview -->
                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBox 
                                            Grid.Column="0"
                                            x:Name="GeneratedPasswordPreview"
                                            IsReadOnly="True"
                                            Background="#FF0F1F35"
                                            Foreground="White"
                                            BorderBrush="{StaticResource AccentBrush}"
                                            BorderThickness="1"
                                            Padding="8"
                                            FontFamily="Consolas"
                                            FontSize="12"
                                            Text="Haz clic en Generar"/>
                                        
                                        <Button 
                                            Grid.Column="1"
                                            Content="📋"
                                            Style="{StaticResource SmallButton}"
                                            Click="CopyPassword_Click"
                                            ToolTip="Copiar"
                                            Margin="4,0,0,0"/>
                                    </Grid>

                                    <!-- Action Buttons -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <Button 
                                            Grid.Column="0"
                                            Content="🎲 Generar"
                                            Style="{StaticResource AccentButton}"
                                            Click="GeneratePassword_Click"
                                            Margin="0,0,4,0"/>
                                        
                                        <Button 
                                            Grid.Column="1"
                                            Content="✅ Usar"
                                            Style="{StaticResource SuccessButton}"
                                            Click="UseGeneratedPassword_Click"
                                            Margin="4,0,0,0"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                        
                        <!-- Right Column -->
                        <StackPanel Grid.Column="2">
                            <!-- Encryption Method Selection -->
                            <Border Style="{StaticResource Card}" Margin="0,0,0,12">
                                <StackPanel>
                                    <TextBlock 
                                        Text="🔐 Método de Encriptación" 
                                        Style="{StaticResource SectionTitle}"
                                        Margin="0,0,0,12"/>
                                    
                                    <StackPanel Margin="0,0,0,16">
                                        <RadioButton 
                                            x:Name="UsePasswordEncryptRadio"
                                            Content="🔑 Usar Contraseña"
                                            IsChecked="True"
                                            Checked="EncryptionMethod_Changed"
                                            Foreground="{StaticResource OnSurfaceBrush}"
                                            FontSize="14"
                                            Margin="0,0,0,8"/>
                                        <RadioButton 
                                            x:Name="UseCertificateEncryptRadio"
                                            Content="📜 Usar Certificado PKI"
                                            Checked="EncryptionMethod_Changed"
                                            Foreground="{StaticResource OnSurfaceBrush}"
                                            FontSize="14"/>
                                    </StackPanel>

                                    <!-- Password Configuration Panel -->
                                    <StackPanel x:Name="PasswordEncryptPanel">
                                        <Grid Margin="0,0,0,12">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <PasswordBox 
                                                Grid.Column="0"
                                                x:Name="EncryptPasswordInput" 
                                                Style="{StaticResource ModernPasswordBox}"
                                                ToolTip="Ingrese una contraseña segura"
                                                PasswordChanged="EncryptPasswordInput_PasswordChanged"/>
                                            
                                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                <Button 
                                                    x:Name="ShowEncryptPasswordButton"
                                                    Content="👁️"
                                                    Style="{StaticResource SmallButton}"
                                                    Click="ShowEncryptPassword_Click"
                                                    VerticalAlignment="Center"
                                                    Margin="4,0,0,0"/>
                                                <Button 
                                                    x:Name="ToggleGeneratorButton"
                                                    Content="🎲"
                                                    Style="{StaticResource SmallButton}"
                                                    Click="ToggleGenerator_Click"
                                                    ToolTip="Generar contraseña"
                                                    Margin="4,0,0,0"/>
                                            </StackPanel>
                                        </Grid>

                                        <!-- Password Strength Indicator -->
                                        <StackPanel x:Name="EncryptStrengthIndicator" Margin="0,0,0,8">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <ProgressBar 
                                                    x:Name="EncryptStrengthBar"
                                                    Grid.Column="0"
                                                    Height="4"
                                                    Background="#FF374151"
                                                    BorderThickness="0"
                                                    Value="0"
                                                    Maximum="100"
                                                    Style="{StaticResource ModernProgressBar}"/>
                                                
                                                <TextBlock 
                                                    x:Name="EncryptStrengthText"
                                                    Grid.Column="1"
                                                    Text="Débil"
                                                    FontSize="12"
                                                    FontWeight="SemiBold"
                                                    Margin="8,0,0,0"
                                                    VerticalAlignment="Center"/>
                                            </Grid>
                                        </StackPanel>
                                    </StackPanel>

                                    <!-- Certificate Configuration Panel -->
                                    <StackPanel x:Name="CertificateEncryptPanel" Visibility="Collapsed">
                                        <Grid Margin="0,0,0,8">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <TextBox 
                                                Grid.Column="0"
                                                x:Name="SelectedCertificateTextBox"
                                                Style="{StaticResource ModernTextBox}"
                                                IsReadOnly="True"
                                                Text="Ningún certificado seleccionado"
                                                Background="#FF374151"/>
                                            
                                            <Button 
                                                Grid.Column="1"
                                                Content="📜 Seleccionar"
                                                Style="{StaticResource SmallButton}"
                                                Click="SelectCertificate_Click"
                                                Margin="8,0,0,0"/>
                                            
                                            <Button 
                                                Grid.Column="2"
                                                Content="🔐 Generar"
                                                Style="{StaticResource SmallButton}"
                                                Click="GenerateCertificate_Click"
                                                ToolTip="Generar nuevo certificado PKI"
                                                Margin="4,0,0,0"/>
                                        </Grid>
                                        
                                        <TextBlock 
                                            x:Name="CertificateInfoText"
                                            Text="Selecciona un certificado PKI para encriptar"
                                            FontSize="12"
                                            Foreground="#FF6B7280"
                                            Margin="0,0,0,0"/>
                                    </StackPanel>

                                    <!-- Security Tips - Compact -->
                                    <Border Background="#FF0F1F35" 
                                            BorderBrush="#FF3B82F6" 
                                            BorderThickness="1" 
                                            CornerRadius="6" 
                                            Padding="10"
                                            Margin="0,8,0,0">
                                        <StackPanel>
                                            <TextBlock 
                                                Text="💡 Consejos" 
                                                FontSize="12" 
                                                FontWeight="SemiBold" 
                                                Foreground="#FF3B82F6"
                                                Margin="0,0,0,4"/>
                                            <TextBlock 
                                                x:Name="SecurityTipsText"
                                                Text="• Mínimo 12 caracteres
• Se genera frase de recuperación"
                                                FontSize="11"
                                                Foreground="#FF93C5FD"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </StackPanel>

                <!-- Decrypt Section -->
                <StackPanel x:Name="DecryptSection" Visibility="Collapsed">
                    <TextBlock Text="🔓 Desencriptar Archivos" Style="{StaticResource SectionHeader}" Margin="0,0,0,16"/>
                    
                    <!-- Main Layout Grid -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Left Column -->
                        <StackPanel Grid.Column="0">
                            <!-- File Selection & Drop Zone -->
                            <Border Style="{StaticResource Card}" Margin="0,0,0,12">
                                <StackPanel>
                                    <TextBlock 
                                        Text="📂 Seleccionar Archivo .enc" 
                                        Style="{StaticResource SectionTitle}" 
                                        Margin="0,0,0,12"/>
                                    
                                    <Grid x:Name="DecryptDropZone" Height="100" Margin="0,0,0,12">
                                        <Rectangle 
                                            Stroke="#FFEF4444" 
                                            StrokeThickness="2" 
                                            StrokeDashArray="8,4" 
                                            RadiusX="8" 
                                            RadiusY="8"
                                            Fill="Transparent"/>
                                        
                                        <StackPanel 
                                            HorizontalAlignment="Center" 
                                            VerticalAlignment="Center">
                                            <TextBlock 
                                                Text="🔓" 
                                                FontSize="24" 
                                                HorizontalAlignment="Center" 
                                                Foreground="#FFEF4444"
                                                Margin="0,0,0,4"/>
                                            <TextBlock 
                                                Text="Arrastra archivos .enc aquí" 
                                                FontSize="14" 
                                                FontWeight="SemiBold"
                                                HorizontalAlignment="Center" 
                                                Foreground="{StaticResource OnSurfaceBrush}"/>
                                        </StackPanel>
                                    </Grid>
                                    
                                    <Button
                                        Content="📁 Seleccionar Archivo .enc"
                                        Style="{StaticResource AccentButton}"
                                        Click="DecryptFile_Click"
                                        HorizontalAlignment="Stretch"
                                        Background="#FFEF4444"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Info Card -->
                            <Border Style="{StaticResource Card}" Background="#FF1A2332" Margin="0,0,0,0">
                                <StackPanel>
                                    <TextBlock 
                                        Text="💡 Información" 
                                        FontSize="16"
                                        FontWeight="Bold"
                                        Foreground="#FF60A5FA"
                                        Margin="0,0,0,12"/>
                                    
                                    <StackPanel>
                                        <TextBlock 
                                            Text="• Puedes usar contraseña O frase de recuperación"
                                            FontSize="12"
                                            Foreground="#FFBFDBFE"
                                            Margin="0,0,0,4"/>
                                        <TextBlock 
                                            Text="• Solo archivos con extensión .enc"
                                            FontSize="12"
                                            Foreground="#FFBFDBFE"
                                            Margin="0,0,0,4"/>
                                        <TextBlock 
                                            Text="• La frase de recuperación son 12 palabras"
                                            FontSize="12"
                                            Foreground="#FFBFDBFE"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                        
                        <!-- Right Column -->
                        <StackPanel Grid.Column="2">
                            <!-- Decryption Method -->
                            <Border Style="{StaticResource Card}" Margin="0,0,0,12">
                                <StackPanel>
                                    <TextBlock 
                                        Text="🔑 Método de Desencriptación" 
                                        Style="{StaticResource SectionTitle}"
                                        Margin="0,0,0,12"/>
                                    
                                    <!-- Method Selection -->
                                    <StackPanel Margin="0,0,0,16">
                                        <RadioButton 
                                            x:Name="UsePasswordRadio"
                                            Content="🔐 Usar Contraseña"
                                            IsChecked="True"
                                            Checked="DecryptionMethod_Changed"
                                            Foreground="{StaticResource OnSurfaceBrush}"
                                            FontSize="14"
                                            Margin="0,0,0,6"/>
                                        <RadioButton 
                                            x:Name="UseRecoveryPhraseRadio"
                                            Content="📝 Usar Frase de Recuperación"
                                            Checked="DecryptionMethod_Changed"
                                            Foreground="{StaticResource OnSurfaceBrush}"
                                            FontSize="14"
                                            Margin="0,0,0,6"/>
                                        <RadioButton 
                                            x:Name="UseCertificateDecryptRadio"
                                            Content="📜 Usar Certificado PKI"
                                            Checked="DecryptionMethod_Changed"
                                            Foreground="{StaticResource OnSurfaceBrush}"
                                            FontSize="14"/>
                                    </StackPanel>

                                    <!-- Password Input -->
                                    <StackPanel x:Name="PasswordDecryptPanel">
                                        <Grid Margin="0,0,0,8">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <PasswordBox 
                                                Grid.Column="0"
                                                x:Name="DecryptPasswordInput" 
                                                Style="{StaticResource ModernPasswordBox}"
                                                ToolTip="Ingrese la contraseña de desencriptación"/>
                                            
                                            <Button 
                                                Grid.Column="1"
                                                x:Name="ShowDecryptPasswordButton"
                                                Content="👁️"
                                                Style="{StaticResource SmallButton}"
                                                Click="ShowDecryptPassword_Click"
                                                VerticalAlignment="Center"
                                                Margin="8,0,0,0"/>
                                        </Grid>
                                    </StackPanel>

                                    <!-- Recovery Phrase Input -->
                                    <StackPanel x:Name="RecoveryPhraseDecryptPanel" Visibility="Collapsed">
                                        <TextBlock 
                                            Text="Frase de Recuperación (12 palabras):" 
                                            FontSize="13"
                                            Foreground="{StaticResource OnSurfaceBrush}"
                                            Margin="0,0,0,8"/>
                                        
                                        <TextBox 
                                            x:Name="DecryptRecoveryPhraseInput"
                                            Style="{StaticResource RecoveryPhraseInput}"
                                            Height="80"
                                            ToolTip="Ingrese las 12 palabras separadas por espacios"
                                            TextChanged="DecryptRecoveryPhrase_TextChanged"/>
                                        
                                        <TextBlock 
                                            x:Name="RecoveryPhraseValidation"
                                            Text="Ingrese las 12 palabras separadas por espacios"
                                            Style="{StaticResource WarningText}"
                                            Margin="0,4,0,0"/>
                                    </StackPanel>

                                    <!-- Certificate Input -->
                                    <StackPanel x:Name="CertificateDecryptPanel" Visibility="Collapsed">
                                        <Grid Margin="0,0,0,8">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <TextBox 
                                                Grid.Column="0"
                                                x:Name="DecryptCertificateTextBox"
                                                Style="{StaticResource ModernTextBox}"
                                                IsReadOnly="True"
                                                Text="Ningún certificado seleccionado"
                                                Background="#FF374151"/>
                                            
                                            <Button 
                                                Grid.Column="1"
                                                Content="📜 Seleccionar"
                                                Style="{StaticResource SmallButton}"
                                                Click="SelectDecryptCertificate_Click"
                                                Margin="8,0,0,0"/>
                                        </Grid>
                                        
                                        <TextBlock 
                                            Text="Selecciona el certificado usado para encriptar (debe tener clave privada)"
                                            FontSize="12"
                                            Foreground="#FF6B7280"
                                            TextWrapping="Wrap"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                            
                            <!-- Quick Action -->
                            <Border Style="{StaticResource Card}" Background="#FF0F1F35" BorderBrush="#FFEF4444" BorderThickness="1">
                                <StackPanel>
                                    <TextBlock 
                                        Text="⚡ Acción Rápida" 
                                        FontSize="14"
                                        FontWeight="SemiBold"
                                        Foreground="#FFEF4444"
                                        Margin="0,0,0,12"/>
                                    
                                    <Button
                                        Content="🔓 Desencriptar Ahora"
                                        Style="{StaticResource AccentButton}"
                                        Background="#FFEF4444"
                                        Click="DecryptFile_Click"
                                        HorizontalAlignment="Stretch"
                                        FontWeight="Bold"/>
                                    
                                    <TextBlock 
                                        Text="Usa este botón si ya seleccionaste el archivo y configuraste la autenticación"
                                        FontSize="11"
                                        Foreground="#FF93C5FD"
                                        TextWrapping="Wrap"
                                        Margin="0,8,0,0"
                                        HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </StackPanel>

                <!-- Info Card -->
                <Border Style="{StaticResource Card}" Background="#FF1A2332" Margin="0,24,0,0">
                    <StackPanel>
                        <TextBlock 
                            Text="💡 Información" 
                            Style="{StaticResource SectionTitle}"
                            Foreground="#FF60A5FA"/>
                        
                        <StackPanel>
                            <TextBlock 
                                Text="🔐 Encriptación:"
                                FontSize="14"
                                FontWeight="SemiBold"
                                Foreground="#FF60A5FA"
                                Margin="0,0,0,4"/>
                            <TextBlock 
                                Text="• Los archivos encriptados tendrán extensión .enc"
                                FontSize="13"
                                Foreground="#FFBFDBFE"
                                TextWrapping="Wrap"
                                Margin="8,0,0,4"/>
                            <TextBlock 
                                Text="• Se genera automáticamente una frase de recuperación de 12 palabras"
                                FontSize="13"
                                Foreground="#FFBFDBFE"
                                TextWrapping="Wrap"
                                Margin="8,0,0,4"/>
                            <TextBlock 
                                Text="• Usa contraseñas seguras para mejor protección"
                                FontSize="13"
                                Foreground="#FFBFDBFE"
                                TextWrapping="Wrap"
                                Margin="8,0,0,8"/>
                            
                            <TextBlock 
                                Text="🔓 Desencriptación:"
                                FontSize="14"
                                FontWeight="SemiBold"
                                Foreground="#FF60A5FA"
                                Margin="0,0,0,4"/>
                            <TextBlock 
                                Text="• Puedes usar la contraseña original O la frase de recuperación"
                                FontSize="13"
                                Foreground="#FFBFDBFE"
                                TextWrapping="Wrap"
                                Margin="8,0,0,4"/>
                            <TextBlock 
                                Text="• La frase de recuperación es útil si olvidas la contraseña"
                                FontSize="13"
                                Foreground="#FFBFDBFE"
                                TextWrapping="Wrap"
                                Margin="8,0,0,4"/>
                            <TextBlock 
                                Text="• Arrastra archivos directamente a las zonas correspondientes"
                                FontSize="13"
                                Foreground="#FFBFDBFE"
                                TextWrapping="Wrap"
                                Margin="8,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>